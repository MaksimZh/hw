# Фазз-тестирование

## Подготовка
Главной трудностью стало то, что я работаю под Windows,
а все фаззеры, которые я пытался использовать эту платформу не поддерживают.
Поэтому для тестирования использовалась WSL с Ubuntu,
но даже там с установкой некоторых фаззеров возникли сложности.

Все мои свежие проекты написаны на Python, поэтому я искал фаззер,
который поддерживает именно этот язык.

Первым фаззером, который удалось установить и запустить с кодом на Python
оказался [Atheris](https://github.com/google/atheris).

Большинство моих рабочих проектов работают по принципу:
получить на вход 2-3 числа и уйти на несколько минут в размышления
о квантовой механике.
Сделать много запусков таких программ было бы проблематично.
Поэтому я решил потренироваться на учебных проектах.


## Tennis из курса PSP
Фаззер каждый раз предоставляет в качестве входных данных массив байтов.

Если очередной байт делится на 2 - это очко певому игроку, если нет - второму.

Если один из игроков уже выиграл, то при попытке начислить ещё очки
программа генерировала исключение `ValueError("Game over")`.
Это не очень удобно для фаззинга, так как легко перепутать эту ситуацию
с `ValueError`, вызванным ошибкой в коде.
Поэтому исходная программа была модифицирована, чтобы генерировать
отдельный тип исключения: `GameOverError`.

### Найденные ошибки
За 1 миллион запусков фаззер так ни разу и не уронил программу:


## АТД динамический массив из курса по ООП
Этот тип замечателен тем, что вообще не должен генерировать исключений.

Случайный поток байт интерпретировался как разные команды и запросы.
Если метод требует параметры - использовался следующий байт (если он есть).

### Найденные ошибки
- Пропущена проверка предусловия команды изменения размера буфера:
новый буфер короче, чем массив.
- Задание буфера нулевого размера далает расширение невозможным.
